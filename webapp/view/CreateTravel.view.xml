<mvc:View controllerName="com.hayat.grupseyahat.grupseyahattalebi.controller.CreateTravel"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:form="sap.ui.layout.form"
    xmlns:c="sap.ui.core"
    xmlns:l="sap.ui.layout">
    <Page title="{i18n>title}" navButtonPress="onBack" showNavButton="true">
        <content>
            <Panel headerText="{i18n>travelDetail}">
                <form:Form>
                    <form:layout>
                        <form:ResponsiveGridLayout adjustLabelSpan="false" emptySpanXL="4" emptySpanL="4" columnsXL="1" columnsL="1" singleContainerFullSize="false" />
                    </form:layout>
                    <form:formContainers>
                        <form:FormContainer>
                            <form:formElements>
                                <form:FormElement label="{i18n>reason}">
                                    <form:fields>
                                        <Input id="idPurpose" value="{Header>/Purpose}" required="true" editable="{/GeneralEditable}"/>
                                    </form:fields>
                                </form:FormElement>
                                <form:FormElement label="{i18n>purpose}">
                                    <form:fields>
                                        <ComboBox id="idTripActivity" items="{
                                    path: 'TripActivities>/',
                                    templateShareable: false,
                                    length:1000
                                }" selectedKey="{Header>/TripActivity}" required="true" editable="{/GeneralEditable}">
                                            <c:ListItem key="{TripActivities>Id}" text="{TripActivities>Description}" />
                                        </ComboBox>
                                    </form:fields>
                                </form:FormElement>
                                <form:FormElement label="{i18n>startDate}">
                                    <form:fields>
                                        <DatePicker id="idDeparture" value="{path: 'Header>/Departure', 
                                type: 'sap.ui.model.type.Date',
                                formatOptions: {
                                    pattern: 'dd-MM-YYYY', 
                                    UTC: true
                                }
                        }" required="true" editable="{/GeneralEditable}"/>
                                    </form:fields>
                                </form:FormElement>
                                <form:FormElement label="{i18n>endDate}">
                                    <form:fields>
                                        <DatePicker id="idArrival" value="{path: 'Header>/Arrival', 
                                type: 'sap.ui.model.type.Date',
                                formatOptions: {
                                    pattern: 'dd-MM-YYYY', 
                                    UTC: true
                                }
                        }" required="true" editable="{/GeneralEditable}"/>
                                    </form:fields>
                                </form:FormElement>
                                <form:FormElement label="{i18n>country}">
                                    <form:fields>
                                        <Input id="idCountryCode" value="{= ${Header>/CountryCode} ? ${Header>/CountryName} + ' (' + ${Header>/CountryCode} + ')' : ''}" valueHelpOnly="true" showValueHelp="true" required="true" valueHelpRequest="onValueHelpGeneral($event,'country')" editable="{/GeneralEditable}">

                                        </Input>

                                    </form:fields>
                                </form:FormElement>
                                <form:FormElement label="{i18n>region}" visible="{/SeyahatBolgesi}">
                                    <form:fields>
                                        <Input id="idRegionCode" value="{= ${Header>/RegionCode} ? ${Header>/RegionName} + ' (' + ${Header>/RegionCode} + ')' : ''}" valueHelpOnly="true" showValueHelp="true" required="true" valueHelpRequest="onValueHelpGeneral($event,'region',${Header>/CountryCode})" editable="{/GeneralEditable}"></Input>
                                    </form:fields>
                                </form:FormElement>
                                <form:FormElement label="{i18n>reasonText}" visible="{/SeyahatBolgesi}">
                                    <form:fields>
                                        <TextArea id="idNote" value="{Header>/Note}" showExceededText="true" maxLength="1024" required="true" editable="{/GeneralEditable}" />
                                    </form:fields>
                                </form:FormElement>
                                <form:FormElement label="{i18n>place}">
                                    <form:fields>
                                        <Input value="{Header>/LocationEnd}" maxLength="59" editable="{/GeneralEditable}" />
                                    </form:fields>
                                </form:FormElement>
                            </form:formElements>
                        </form:FormContainer>
                    </form:formContainers>
                </form:Form>
            </Panel>
            <Panel headerText="{i18n>USERLIST}" visible="{/UserList}">
                <Table id="idUserScreenList" items="{UserList>/}" mode="MultiSelect">
                    <headerToolbar>
                        <OverflowToolbar>
                            <content>
                                <Title text="{i18n>USERLIST}" level="H2" />
                                <Button icon="sap-icon://add" text="{i18n>ROWADD}" press="onAddRow" />
                                <Button icon="sap-icon://delete" text="{i18n>ROWDEL}" press="onDeleteRow" />
                            </content>
                        </OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18n>PERNR}" />
                        </Column>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18n>ENAME}"/>
                        </Column>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18n>TITLE}"/>
                        </Column>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18n>COSTCENTER}"/>
                        </Column>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18n>INTERNALORDER}"/>
                        </Column>
                        <Column demandPopin="true" minScreenWidth="Tablet">
                            <Text text="{i18n>WBSELEMENT}"/>
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Input value="{UserList>Pernr}" maxLength="8" showValueHelp="true" valueHelpOnly="true" valueHelpRequest="onUserSearchHelp"/>
                                <Text text="{UserList>FirstName} {UserList>LastName}" />
                                <Text text="{UserList>PlansText}" />
                                <VBox >
                                    <HBox >
                                        <Text text="{UserList>CostCenter}" />
                                    </HBox>
                                    <HBox >
                                        <Text text="{UserList>CostCenterName}" />
                                    </HBox>
                                </VBox>
                                <VBox >
                                    <HBox >
                                        <Text text="{UserList>InternalOrder}"/>
                                    </HBox>
                                    <HBox >
                                        <Text text="{UserList>InternalOrderName}" />
                                    </HBox>
                                </VBox>
                                <VBox >
                                    <HBox >
                                        <Input value="{UserList>WbsElement}" valueHelpOnly="true" showValueHelp="true" required="true" valueHelpRequest="onValueHelpGeneral($event,'wbselement','')"/>
                                    </HBox>
                                    <HBox >
                                        <Text text="{UserList>WbsElementName}" />
                                    </HBox>
                                </VBox>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </Panel>
        </content>
        <footer>
            <OverflowToolbar >
                <ToolbarSpacer ></ToolbarSpacer>
                <Button text="{i18n>SAVE}" icon="sap-icon://save" press="onSaveCreateTravel"></Button>
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>